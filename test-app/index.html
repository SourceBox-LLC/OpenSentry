<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenSentry Remote Viewer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <header>
            <h1>OpenSentry Remote Security</h1>
            <div class="connection-status">
                <span id="status-indicator" class="status-indicator status-disconnected"></span>
                <span id="status-text">Disconnected</span>
            </div>
        </header>

        <main>
            <div class="camera-container">
                <div class="camera-header">
                    <h2>Security Camera Feed</h2>
                    <div class="camera-controls">
                        <button id="fullscreen-btn" class="btn btn-primary">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                            </svg>
                            Fullscreen
                        </button>
                        <button id="refresh-btn" class="btn btn-secondary">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                            </svg>
                            Refresh
                        </button>
                    </div>
                </div>
                <div class="video-wrapper">
                    <img id="camera-feed" src="" alt="Security Camera Feed">
                    <div id="loading-overlay" class="loading-overlay">
                        <div class="loading-spinner"></div>
                        <p>Connecting to camera...</p>
                    </div>
                    <div id="error-overlay" class="error-overlay hidden">
                        <svg viewBox="0 0 24 24" width="48" height="48" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                        </svg>
                        <p>Connection failed</p>
                        <button id="retry-btn" class="btn btn-primary">Retry Connection</button>
                    </div>
                </div>
            </div>

            <div class="server-info">
                <h2>Server Connection</h2>
                <div class="server-config">
                    <div class="form-group">
                        <label for="server-url">Server URL:</label>
                        <div class="input-group">
                            <input type="text" id="server-url" placeholder="http://your-server-ip:8000" value="">
                            <button id="connect-btn" class="btn btn-primary">Connect</button>
                        </div>
                        <small>Example: http://192.168.1.100:8000</small>
                    </div>
                    
                    <div class="server-status" id="server-status">
                        <p>Enter your server URL and click Connect to view the camera feed.</p>
                    </div>
                </div>
            </div>
            
            <div class="detection-info">
                <h2>Detection Information</h2>
                <div id="detection-status">Not connected to server</div>
            </div>
            
            <div class="snapshots-container">
                <div class="snapshots-header">
                    <h2>Detection Snapshots</h2>
                    <div class="snapshots-controls">
                        <button id="load-snapshots-btn" class="btn btn-primary">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                            </svg>
                            Load Snapshots
                        </button>
                        <button id="delete-all-btn" class="btn btn-danger" disabled>
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                            </svg>
                            Delete All
                        </button>
                    </div>
                </div>
                
                <div class="snapshots-grid" id="snapshots-grid">
                    <div class="snapshots-loading" id="snapshots-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading snapshots...</p>
                    </div>
                    <div class="no-snapshots" id="no-snapshots">
                        <svg viewBox="0 0 24 24" width="48" height="48" fill="currentColor">
                            <path d="M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h4.05l1.83-2h4.24l1.83 2H20v12zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"/>
                        </svg>
                        <p>No snapshots found</p>
                    </div>
                    <!-- Snapshot items will be inserted here -->
                </div>
                
                <div class="snapshot-detail-modal" id="snapshot-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="modal-title">Snapshot Detail</h3>
                            <button id="close-modal-btn" class="btn-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <img id="modal-image" src="" alt="Snapshot">
                            <div class="snapshot-info" id="modal-info">
                                <p><strong>Object:</strong> <span id="modal-object"></span></p>
                                <p><strong>Time:</strong> <span id="modal-time"></span></p>
                                <p><strong>File:</strong> <span id="modal-filename"></span></p>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <a id="download-snapshot-btn" class="btn btn-primary" download>
                                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                </svg>
                                Download
                            </a>
                            <button id="delete-snapshot-btn" class="btn btn-danger">
                                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                </svg>
                                Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>OpenSentry Remote Viewer &copy; 2025</p>
            <p>For use with OpenSentry Security Camera Server</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
